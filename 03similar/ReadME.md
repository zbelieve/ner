**相似性实验报告**

**一：原理**

**(1) TF-IDF算法:** TF-IDF是一种统计方法，用以评估字词对于一个文件集或一个语料库中的其中一份文件的重要程度。字词的重要性随着它在文件中出现的次数成正比增加，但同时会随着它在语料库中出现的频率成反比下降。TF-IDF加权的各种形式常被搜索引擎应用，作为文件与用户查询之间相关程度的度量或评级。TFIDF的主要思想是:如果某个词或短语在一篇文章中出现的频率TF高，并且在其他文章中很少出现，则认为此词或者短语具有很好的类别区分能力，适合用来分类。在python中该算法封装在gensim中。某一特定文件内的高词语频率，以及该词语在整个文件集合中的低文件频率，可以产生出高权重的TF-IDF。因此，TF-IDF倾向于过滤掉常见的词语，保留重要的词语。

TF意思是词频，IDF意思是逆文本频率指数

词频(term frequency，TF)指的是某一个给定的词语在该文件中出现的频率。这个数字是对词数(term count)的归一化，以防止它偏向长的文件。对于在某一特定文件里的词语来

说，它的重要性可表示为:![58702244878](C:\Users\92136\AppData\Local\Temp\1587022448783.png)分子是该词在文件中的出现次数，而分母则是在文件中所有字词的出现次数之和。

逆向文件频率(inverse document frequency，IDF)是一个词语普遍重要性的度量。某一特定词语的IDF，可以由总文件数目除以包含该词语之文件的数目，再将得到的商取以10为底的对数得到。

 **(2) 语料（Corpus）：**一组原始文本的集合，用于无监督地训练文本主题的隐层结构。语料中不需要人工标注的附加信息。在Gensim中，Corpus通常是一个可迭代的对象（比如列表）。每一次迭代返回一个可用于表达文本对象的稀疏向量。

**（3）向量（Vector）：**由一组文本特征构成的列表。是一段文本在Gensim中的内部表达。

**（4）稀疏向量（SparseVector）：**通常，我们可以略去向量中多余的0元素。此时，向量中的每一个元素是一个(key, value)的元组

**（5）模型（Model）：**是一个抽象的术语。定义了两个向量空间的变换（即从文本的一种向量表达变换为另一种向量表达）。

**(6)****两篇文章相似度计算的一般步骤：**

1.找出各自文章的关键词并合成一个词集合

​     2.求出两个词集合的并集(词包)

​     3.计算各自词集的词频并把词频向量化

​     4.带入向量计算模型就可以求出文本相似度

**利用tf-idf做文章相似性的一般步骤：**

​    1.使用TF-IDF算法，找出两篇文章的关键词

​    2．每篇文章各取出若干个关键词（比如20个），合并成一个集合，计算每篇文章对于这个集合中的词的词频（为了避免文章长度的差异，可以使用相对词频）

​    3．生成两篇文章各自的词频向量

​    4．计算两个向量的余弦相似度，值越大就表示越相似

**（7）**

**稀疏向量**

稀疏向量和密集向量都是向量的表示方法

密集向量和稀疏向量的区别: 密集向量的值就是一个普通的Double数组 而稀疏向量由两个并列的 数组indices和values组成 例如:向量(1.0,0.0,1.0,3.0)用密集格式表示为[1.0,0.0,1.0,3.0]，用稀疏格式表示为(4,[0,2,3],[1.0,1.0,3.0])第一个4表示向量的长度(元素个数)，[0,2,3]就是indices数组，[1.0,1.0,3.0]是values数组 表示向量0的位置的值是1.0，2的位置的值是1.0,而3的位置的值是3.0,其他的位置都是0

**稀疏向量** 通常用两部分表示:一部分是顺序向量，另一部分是值向量。例如稀疏向量(4，0，28，53，0，0，4，8)可用值向量(4，28，53，4，8)和顺序向量(1，0，1，1，0，0，1，1)表示。

**二：实验流程**

1.通过文档的名字读取文档。

2.对要计算的多篇文档进行分词。

3．对文档进行整理成指定格式（整理成字符串+空格形式然后存入列表中），方便后续进行计算。

\4. 使用快速生成式和split对词进行切分从而建立一个语料库。

5.计算出词语的频率，字典对应的key值相同时候value增加1。

6.[可选]-对频率低的词语进行过滤。

7.通过语料库建立词典，并将字典进行保存。

8.加载要对比的文档。

\9. 将新语料库通过tf-idf model 进行处理,得到新语料库，对其中的每个词进行处理，转化为稀疏向量。

10.通过token2id得到特征数稀疏矩阵相似度（字典里面的键的个数）

\11. 稀疏矩阵相似度，从而建立索引，特征数和稀疏向量建立索引

\12. 得到最终相似结果，将要比对的文档传入，这儿得到的就是相似结果,查询相似的百分比

13.排序从而检索出前三个文档

**三：实验结果**

1.读取16个txt文档。每个文档都是一篇小新闻比如d10.txt,如下所示。

![img](file:///C:/Users/92136/AppData/Local/Temp/msohtmlclip1/01/clip_image002.jpg)

![img](file:///C:/Users/92136/AppData/Local/Temp/msohtmlclip1/01/clip_image003.png)

2.使用jieba分词后效果如下所示

![img](file:///C:/Users/92136/AppData/Local/Temp/msohtmlclip1/01/clip_image005.jpg)

3.在与对比文档对比后分析相似性得到每个文档的相似性

![img](file:///C:/Users/92136/AppData/Local/Temp/msohtmlclip1/01/clip_image006.png)

4.对相似度进行排序并得到排名前三的相似度文档。